<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta content="width=device-width, initial-scale=1.0" name="viewport">

		<title>1级现代观测数据</title>
		<meta content="" name="description">
		<meta content="" name="keywords">

		<!-- Favicons -->
		<link href="assets/img/favicon.png" rel="icon">
		<link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

		<!-- Google Fonts -->
		<link
			href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
			rel="stylesheet">

		<!-- Vendor CSS Files -->
		<link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
		<link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
		<link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
		<link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
		<link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
		<link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
		<link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
		<link href="assets/bootstrap-year-calendar/css/bootstrap-year-calendar.css" >
		<link href="assets/bootstrap-year-calendar/css/bootstrap-year-calendar.min.css">
		<!-- Template Main CSS File -->
		<link href="assets/css/style.css" rel="stylesheet">
		<link href="assets/css/calendar.css" rel="stylesheet" type="text/css" media="all" />

		<!-- 导入阿里的图标样式文件 -->
		<link rel="stylesheet" href="assets/css/iconfont.css">
		<link rel="stylesheet" href="assets/css/left_nav.css">

		<!-- js -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/bootstrap-year-calendar/js/bootstrap-year-calendar.js"></script>
		<script src="assets/bootstrap-year-calendar/js/bootstrap-year-calendar.min.js"></script>
		<!-- import moment JavaScript -->
		<script src="assets/js/moment.js"></script>
		<script src="assets/js/moment.min.js"></script>
		<!-- import element-ui CSS -->
		<link rel="stylesheet" href="assets/css/element-ui/theme-chalk/index.css">
		<!-- import Vue before Element -->
		<script src="assets/js/vue/vue.js"></script>
		<!-- import element-ui JavaScript -->
		<script src="assets/js/element-ui/lib/index.js"></script>
	</head>

	<body>
		<!-- ======= Header ======= -->
		<div id="head"></div>
		<script>
			$("#head").load("head.html");
		</script>
		<!-- End Header -->
		<main id="main" style="margin-top: 0;">

			<!-- ======= Breadcrumbs Section ======= -->
			<section class="breadcrumbs">
				<div class="container">

					<div class="d-flex justify-content-between align-items-center">
						<h2>数据产品</h2>
						<ol>
							<li><a href="index.html">首页</a></li>
							<li>数据产品</li>
						</ol>
					</div>
				</div>
			</section>
			<!-- End Breadcrumbs Section -->
			<section class="inner-page">
				<div class="container">
					<div class="row">
						<div id="data-menu" class="menu-box">
						</div>
						<script>
							$("#data-menu").load("components/data-menu.html")
						</script>
						<div class="col-lg-9 mt-4 mt-lg-0">
							<div class="tab-content">
								<p id="deviceName" style="margin-top: 10px;">便携式自动气象站
								<p>
								<div id="calender">
									<el-container>
										<el-header>
											<div style="text-align: center;">
												<span class="demonstration">起始日</span>
												<el-date-picker v-model="fromDate" type='date' placeholder="选择日">
												</el-date-picker>

												<span class="demonstration">结束日</span>
												<el-date-picker v-model="endDate" type='date' placeholder="选择日">
												</el-date-picker>

												<el-button style="margin-left: 1.25rem;" type="primary"
													@click="downloadData()" rounds>下载数据
												</el-button>
											</div>
										</el-header>
										<el-main>
<<<<<<< Updated upstream
											<el-row>
												<el-col :span="6" v-for="(item,index) in monthList" style="margin-bottom: 20px;">
													<span>{{item}}月</span>
													<el-calendar :value="'2022-' + item">
													</el-calendar>
												</el-col>
											</el-row>
=======
											<!-- 日历挂载 -->
											
>>>>>>> Stashed changes
										</el-main>
									</el-container>
								</div>
							</div>
						</div>
					</div>
				</div>
				</div>
			</section>

		</main>
		<!-- End #main -->

		<!-- ======= Footer ======= -->
		<footer id="footer">
			<div class="container d-md-flex py-4">

				<div class="me-md-auto text-center text-md-start">
					<div class="copyright">
						&copy; Copyright <strong><span>中国气象局人工影响天气中心</span></strong>. All Rights Reserved
					</div>

				</div>
			</div>
		</footer>
		<!-- End Footer -->
		<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
				class="bi bi-arrow-up-short"></i></a>

		<!-- Vendor JS Files -->
		<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
		<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
		<script src="assets/vendor/php-email-form/validate.js"></script>
		<script src="assets/vendor/purecounter/purecounter.js"></script>
		<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

		<!-- Template Main JS File -->
		<script src="assets/js/main.js"></script>
	</body>
	<style>
		.el-calendar__body {
			width: 230px;
			height: 200px;
		}

		.el-calendar__header {
			display: none;
		}

		.el-calendar-table .el-calendar-day {
			width: 60px;
			height: 30px;
		}

		.el-col {
			border-radius: 4px;
		}

		.is-selected {
			color: #1989FA;
		}
	</style>
	<script src="assets/js/login/login.js"></script>
	<script>
		new Vue({
			el: '#calender',
			data() {
				return {
					dataPickerOption: 'year',
					value: new Date(),
					showYear: 2022,
					dayTime: ["2022-03-28", "2022-01-26", "2022-03-16"],
					fromDate: '',
					endDate: '',
					monthList: ['01', '02','03', '04','05', '06','07', '08','09', '10','11', '12']
				}
			},
			beforeMount() {
				this.createMonthDict()
			},
			watch: {
				dataPickerOption() {
					this.fromDate = ''
					this.endDate = ''
				},
				showYear() {
					this.createMonthDict()
				}

			},
			computed: {
				datePickStatus: function() {
					if (this.fromDate != '' && this.endDate != '' && this.endDate != null && this.fromDate !=
						null) {
						return true
					} else {
						return false
					}
				},
			},
			methods: {
				/**
				 * 得到开始和结束日期，得到中间所有天返回数组
				 * @param {String} string 开始日期'2021-7-1'
				 * @param {String} String 结束日期'2021-8-1'
				 * @return {Array} ['2021-07-01', '2021-07-01'...., '2021-08-01']
				 */
				getDayArr(startDay, endDay) {
					let startVal = moment(new Date(startDay)).format('YYYY-MM-DD')
					let dayArr = []
					while (moment(startVal).isBefore(endDay)) {
						dayArr.push(startVal)
						// 自增
						startVal = moment(new Date(startVal)).add(1, 'day').format('YYYY-MM-DD')
					}
					// 将结束日期的天放进数组
					dayArr.push(moment(new Date(endDay)).format('YYYY-MM-DD'))
					return dayArr
				},
				// 获取周一
				getMonday(date) {
					var dd = new Date(date)
					var week = dd.getDay(); //获取时间的星期数
					var minus = week ? week - 1 : 6;
					dd.setDate(dd.getDate() - minus); //获取周一日期
					var y = dd.getFullYear();
					var m = dd.getMonth() + 1 < 10 ? "0" + (dd.getMonth() + 1) : dd.getMonth() + 1;
					var d = dd.getDate() < 10 ? "0" + dd.getDate() : dd.getDate();
					return y + "-" + m + "-" + d;
				},
				
				// 获取周日
				getSunday(date) {
					var dd = new Date(date)
					var week = dd.getDay(); //获取时间的星期数
					var minus = week ? week - 1 : 6;
					dd.setDate(dd.getDate() - minus); //获取周一日期
					dd.setDate(dd.getDate() + 6) //加6得到周日日期
					var y = dd.getFullYear();
					var m = dd.getMonth() + 1 < 10 ? "0" + (dd.getMonth() + 1) : dd.getMonth() + 1;
					var d = dd.getDate() < 10 ? "0" + dd.getDate() : dd.getDate();
					return y + "-" + m + "-" + d;
				},
				//
				getMonthArea(item){
					return [this.getMonday(this.getFirstDayOfMonth(this.showYear, item)), this.getSunday(this.getLastDatOfMonth(this.showYear, item))]
				}
				,
				getFirstDayOfMonth(year, month) {
					return new Date(year, month, 1);
				},
				getLastDatOfMonth(year, month) {
					return new Date(year, month + 1, 0)
				},
				
				downloadData() {
					console.log(this.getMonthArea(0))
					if (this.datePickStatus) {
						console.log(this.getDayArr(this.fromDate, this.endDate))
						this.$message.success('请求成功，等待服务器响应！');
					} else {
						this.$message.error('请先选择下载日期！');
					}
				}
			}
		})
	</script>
</html>
